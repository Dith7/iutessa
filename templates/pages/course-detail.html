{% extends 'base.html' %}
{% load static %}

{% block title %}{{ course.title }} - IUTESSA{% endblock %}

{% block extra_css %}
<style>
    .course-info-item {
        display: flex;
        align-items: center;
        padding: 15px 0;
        border-bottom: 1px solid #f0f0f0;
    }
    
    .course-info-item:last-child {
        border-bottom: none;
    }
    
    .course-info-label {
        font-weight: 600;
        color: #192f59;
        min-width: 150px;
    }
    
    .course-info-value {
        color: #666;
    }

    .related-course-card {
        transition: all 0.3s ease;
    }

    .related-course-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 30px rgba(0,0,0,0.1);
    }
</style>
{% endblock %}

{% block content %}

<!-- Breadcrumb -->
<section class="bg-[#f8f8f8] py-6 border-b border-gray-200">
    <div class="max-w-[1140px] mx-auto px-4">
        <div class="flex items-center text-sm text-gray-600">
            <a href="{% url 'pages:home' %}" class="hover:text-[#3db166]">Accueil</a>
            <i class="fas fa-chevron-right mx-3 text-xs"></i>
            <a href="{% url 'pages:courses' %}" class="hover:text-[#3db166]">Cours</a>
            <i class="fas fa-chevron-right mx-3 text-xs"></i>
            <span class="text-[#192f59] font-semibold">{{ course.title|truncatewords:5 }}</span>
        </div>
    </div>
</section>

<!-- Course Header -->
<section class="bg-[#192f59] py-16">
    <div class="max-w-[1140px] mx-auto px-4">
        <div class="flex items-start justify-between">
            <div class="flex-1">
                {% if course.code %}
                <span class="inline-block bg-[#3db166] text-white px-4 py-1 rounded text-sm font-semibold mb-4">
                    {{ course.code }}
                </span>
                {% endif %}
                <h1 class="text-4xl font-bold text-white mb-4">{{ course.title }}</h1>
                
                <div class="flex items-center gap-6 text-white/80">
                    {% if course.filiere %}
                    <span>
                        <i class="fas fa-graduation-cap mr-2"></i>
                        {{ course.filiere.nom }}
                    </span>
                    {% endif %}
                    <span>
                        <i class="fas fa-clock mr-2"></i>
                        {{ course.duration }}
                    </span>
                    <span>
                        <i class="fas fa-signal mr-2"></i>
                        {{ course.level }}
                    </span>
                </div>
            </div>
            
            {% if course.is_required %}
            <span class="bg-red-500 text-white px-6 py-3 rounded font-semibold">
                <i class="fas fa-star mr-2"></i>Cours Obligatoire
            </span>
            {% else %}
            <span class="bg-blue-500 text-white px-6 py-3 rounded font-semibold">
                <i class="fas fa-book mr-2"></i>Cours Électif
            </span>
            {% endif %}
        </div>
    </div>
</section>

<!-- Main Content -->
<section class="bg-white py-16">
    <div class="max-w-[1140px] mx-auto px-4">
        <div class="flex flex-col lg:flex-row gap-8">
            <!-- Main Content (Left Column) -->
            <div class="lg:w-2/3">
                <!-- Course Image -->
                {% if course.image %}
                <div class="mb-8 rounded-lg overflow-hidden">
                    <img src="{{ course.image.url }}" alt="{{ course.title }}" class="w-full h-auto">
                </div>
                {% endif %}

                <!-- Description -->
                <div class="mb-12">
                    <h2 class="text-2xl font-bold text-[#192f59] mb-6">Description du Cours</h2>
                    <div class="prose max-w-none text-gray-700 leading-relaxed">
                        {{ course.description|linebreaks }}
                    </div>
                </div>

                <!-- Course Information -->
                <div class="mb-12">
                    <h2 class="text-2xl font-bold text-[#192f59] mb-6">Informations du Cours</h2>
                    <div class="bg-gray-50 rounded-lg p-6">
                        <div class="course-info-item">
                            <span class="course-info-label">Code du cours</span>
                            <span class="course-info-value">{{ course.code|default:"Non spécifié" }}</span>
                        </div>
                        
                        {% if course.filiere %}
                        <div class="course-info-item">
                            <span class="course-info-label">Filière</span>
                            <span class="course-info-value">
                                <a href="{% url 'pages:courses' %}?search={{ course.filiere.code }}" class="text-[#3db166] hover:underline">
                                    {{ course.filiere.nom }}
                                </a>
                            </span>
                        </div>
                        {% endif %}
                        
                        <div class="course-info-item">
                            <span class="course-info-label">Durée</span>
                            <span class="course-info-value">{{ course.duration }}</span>
                        </div>
                        
                        <div class="course-info-item">
                            <span class="course-info-label">Niveau</span>
                            <span class="course-info-value">{{ course.level }}</span>
                        </div>
                        
                        {% if course.instructor %}
                        <div class="course-info-item">
                            <span class="course-info-label">Instructeur</span>
                            <span class="course-info-value">{{ course.instructor }}</span>
                        </div>
                        {% endif %}
                        
                        {% if course.credits %}
                        <div class="course-info-item">
                            <span class="course-info-label">Crédits</span>
                            <span class="course-info-value">{{ course.credits }} crédits</span>
                        </div>
                        {% endif %}
                        
                        <div class="course-info-item">
                            <span class="course-info-label">Type</span>
                            <span class="course-info-value">
                                {% if course.is_required %}
                                    <span class="text-red-600 font-semibold">Cours Obligatoire</span>
                                {% else %}
                                    <span class="text-blue-600 font-semibold">Cours Électif</span>
                                {% endif %}
                            </span>
                        </div>
                    </div>
                </div>

                <!-- Related Courses -->
                {% if related_courses %}
                <div class="mb-12">
                    <h2 class="text-2xl font-bold text-[#192f59] mb-6">Cours Connexes</h2>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                        {% for related in related_courses %}
                        <a href="{% url 'pages:course_detail' related.slug %}" class="related-course-card bg-white border border-gray-200 rounded-lg p-6 hover:border-[#3db166]">
                            <div class="flex items-center justify-between mb-3">
                                {% if related.code %}
                                <span class="text-[#3db166] font-bold text-sm">{{ related.code }}</span>
                                {% endif %}
                                <i class="fas fa-arrow-right text-[#192f59]"></i>
                            </div>
                            <h3 class="font-bold text-[#192f59] mb-2">{{ related.title }}</h3>
                            <p class="text-sm text-gray-600">{{ related.duration }} • {{ related.level }}</p>
                        </a>
                        {% endfor %}
                    </div>
                </div>
                {% endif %}
            </div>

            <!-- Sidebar (Right Column) -->
            <div class="lg:w-1/3">
                <!-- Quick Actions -->
                <div class="bg-[#192f59] text-white p-8 rounded mb-8 sticky top-24">
                    <h3 class="text-xl font-bold mb-6">Actions Rapides</h3>
                    
                    <div class="space-y-4 mb-8">
                        <a href="{% url 'pages:apply' %}" class="block text-center bg-[#3db166] hover:bg-[#35a05c] text-white py-3 px-6 rounded font-semibold transition-colors">
                            <i class="fas fa-user-plus mr-2"></i>
                            S'inscrire
                        </a>
                        
                        <a href="{% url 'pages:contact' %}" class="block text-center bg-white/10 hover:bg-white/20 text-white py-3 px-6 rounded font-semibold transition-colors border border-white/20">
                            <i class="fas fa-envelope mr-2"></i>
                            Nous Contacter
                        </a>
                        
                        <a href="{% url 'pages:courses' %}" class="block text-center bg-white/10 hover:bg-white/20 text-white py-3 px-6 rounded font-semibold transition-colors border border-white/20">
                            <i class="fas fa-arrow-left mr-2"></i>
                            Retour aux Cours
                        </a>
                    </div>
                    
                    <!-- Share -->
                    <div class="border-t border-white/20 pt-6">
                        <h4 class="text-sm font-bold mb-4 text-gray-300">Partager ce cours</h4>
                        <div class="flex gap-3">
                            <a href="#" class="text-[#3db166] hover:text-white transition-colors text-lg">
                                <i class="fab fa-facebook"></i>
                            </a>
                            <a href="#" class="text-[#3db166] hover:text-white transition-colors text-lg">
                                <i class="fab fa-twitter"></i>
                            </a>
                            <a href="#" class="text-[#3db166] hover:text-white transition-colors text-lg">
                                <i class="fab fa-linkedin"></i>
                            </a>
                            <a href="#" class="text-[#3db166] hover:text-white transition-colors text-lg">
                                <i class="fab fa-whatsapp"></i>
                            </a>
                        </div>
                    </div>
                </div>

                <!-- Contact Info -->
                <div class="bg-gray-50 rounded-lg p-6">
                    <h3 class="text-lg font-bold text-[#192f59] mb-4">Besoin d'aide ?</h3>
                    <p class="text-sm text-gray-600 mb-4">
                        Contactez notre service académique pour plus d'informations sur ce cours.
                    </p>
                    <div class="space-y-2 text-sm">
                        <p class="flex items-center text-gray-700">
                            <i class="fas fa-phone text-[#3db166] w-5 mr-2"></i>
                            +237 6 XX XX XX XX
                        </p>
                        <p class="flex items-center text-gray-700">
                            <i class="fas fa-envelope text-[#3db166] w-5 mr-2"></i>
                            info@iutessa.cm
                        </p>
                        <p class="flex items-center text-gray-700">
                            <i class="fas fa-clock text-[#3db166] w-5 mr-2"></i>
                            Lun-Ven 8h-17h
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

{% endblock %}