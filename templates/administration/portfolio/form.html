<!-- ============================================ -->
<!-- templates/administration/portfolio/form.html -->
<!-- ============================================ -->

{% extends 'administration/base.html' %}

{% block title %}{{ action }} un projet{% endblock %}

{% block content %}
<div class="mb-8">
    <h1 class="text-4xl font-bold text-gradient-iut mb-2">{{ action }} un projet</h1>
</div>

<form method="post" enctype="multipart/form-data">
    {% csrf_token %}
    
    <div class="bg-white/90 rounded-3xl p-8 shadow-xl border border-green-100 space-y-6">
        <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">Titre *</label>
            <input type="text" name="title" value="{{ project.title|default:'' }}" required class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-[#3db166]">
        </div>
        
        <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">Description *</label>
            <textarea name="description" rows="4" required class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-[#3db166]">{{ project.description|default:'' }}</textarea>
        </div>
        
        <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">Image principale *</label>
            <input type="file" name="featured_image" {% if not project %}required{% endif %} accept="image/*" class="w-full px-4 py-2 border rounded-lg">
            {% if project.featured_image %}
            <img src="{{ project.featured_image.url }}" class="mt-2 h-32 rounded-lg">
            {% endif %}
        </div>
        
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">Catégorie</label>
                <select name="category" class="w-full px-4 py-2 border rounded-lg">
                    <option value="">Aucune</option>
                    {% for cat in categories %}
                    <option value="{{ cat.id }}" {% if project.category.id == cat.id %}selected{% endif %}>{{ cat.name }}</option>
                    {% endfor %}
                </select>
            </div>
            
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">Client</label>
                <input type="text" name="client" value="{{ project.client|default:'' }}" class="w-full px-4 py-2 border rounded-lg">
            </div>
            
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">URL du projet</label>
                <input type="url" name="project_url" value="{{ project.project_url|default:'' }}" class="w-full px-4 py-2 border rounded-lg">
            </div>
            
            <div class="flex items-center">
                <input type="checkbox" name="is_featured" id="featured" {% if project.is_featured %}checked{% endif %} class="w-5 h-5 text-[#3db166] rounded">
                <label for="featured" class="ml-2 text-sm text-gray-700">Mettre à la une</label>
            </div>
        </div>
        
        <div class="flex justify-end gap-4 pt-4">
            <a href="{% url 'administration:portfolio_management' %}" class="px-6 py-3 border rounded-lg hover:bg-gray-50">Annuler</a>
            <button type="submit" class="btn-gradient text-white px-8 py-3 rounded-lg">
                <i class="fas fa-save mr-2"></i>{{ action }}
            </button>
        </div>
    </div>
</form>

{% endblock %}